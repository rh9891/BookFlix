<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Document</title>
</head>
<body>
    <input type="text" id="searchBox" placeholder="Media Query">
    <button id="searchBtn">Search</button>
    <div id="searchResults"></div>
    <script type="text/javascript">
    
    var googleKey = "AIzaSyCgSuPSLRf6S38F_qQ6Yssx2NdKM2mdtS0";
    
    
    
    $("#searchBtn").on("click", function(){
        searchTerm = $("#searchBox").val();
        var googleUrl = "https://www.googleapis.com/books/v1/volumes?q="+searchTerm;
        var resultsDiv = $("#searchResults");
        resultsDiv.empty();
        $.ajax({
        url:googleUrl,
        method:"GET"
        }).then(function(bookGet){
        console.log(bookGet); 
        
        for (i=0; i<9; i++){
        
        var title = bookGet.items[i].volumeInfo.title;
        var subtitle = bookGet.items[i].volumeInfo.subtitle;
        var authors = bookGet.items[i].volumeInfo.authors[0]; //in case of multiple authors this won't work
        var coverExists = bookGet.items[i].accessInfo.epub.isAvailable; 
        var coverSm = bookGet.items[i].volumeInfo.imageLinks.smallThumbnail; //img link
        var coverLg = bookGet.items[i].volumeInfo.imageLinks.thumbnail;//img link
        var synop = bookGet.items[i].searchInfo.textSnippet;
        var buyLink = bookGet.items[0].saleInfo.buyLink;
        var resultsCard = $("<div>");
        var coverImg = $("<img>");
        var cardTitle = $("<h4>");
        var cardSubtitle = $("<p>");
        var cardAuthor = $("<p>");
        var cardSynop = $("<p>");
        var cardBuy = $("<p>");
        cardTitle.text(title);
        cardSubtitle.text(subtitle);
        cardAuthor.text(authors);
        cardSynop.html(synop);
        cardBuy.text("Link to purchase: "+buyLink);
        coverImg.attr("src", coverSm);
        resultsCard.attr("class", "card");
        resultsCard.append(cardTitle);
        resultsCard.append(cardSubtitle);
        resultsCard.append(cardAuthor);
        resultsCard.append(cardSynop);
        resultsCard.append(cardBuy);
        resultsCard.append(coverImg);
        resultsDiv.append(resultsCard);
        resultsCard.css({"border-style": "solid", "margin": "20px"});
        }

    })

    })
   
    </script>


</body>
</html>